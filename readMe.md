# 버그시티 - 버그머스마 베팅 봇
## 개요
> 버그시티 내에서 ZEP을 활용한 달리기 게임의 결과를 예측하여 베팅하고 배당금을 분배하는 디스코드 봇

---

## 기능
명령어</br>
기본 명령어 : `/벅머`
- `등록 [선수_1] ~ [선수_10]`
  - 선수 명단을 등록합니다. 최소 1명부터 최대 10명까지 등록가능합니다.
- `구매 [선수:user] [금액:number]`
  - 티켓을 구매합니다.
  - 개인당 최대 3장까지 구매 가능합니다.
  - 선수는 본인을 제외한 선수에게 베팅 불가능.
- `명단`
  - 선수 명단을 확인합니다.
  - 현재 총 베팅금액과 각 선수 별 베당률을 확인합니다.
- `결과 [선수:user]`
  - 1등한 선수를 입력합니다.
  - 1등한 선수를 고른 사람들에게 배당금을 분배합니다.
  - 선수명단을 제외한 모든 정보는 초기화 됩니다.
- `판매시작`
  - 티켓 판매를 시작합니다.
- `판매종료`
  - 티켓 판매를 종료합니다.
- `명단수정 [삭제 / 추가]`
  - 삭제 : 해당 선수를 명단에서 지웁니다.
  - 추가 : 가장 마지막 순서로 선수를 명단에 추가합니다.
- `리셋`
  - 게임의 모든 데이터를 초기화 합니다.
---
## 비고
- 베팅금액의 10%는 운영측에 수수료로 지불된다. (7% : 진행자, 3% : 개발자)
- 베팅금액의 5%는 자신이 베팅한 선수에게 지불된다.

---
- Node.js
- Discord.js
---
## Data Form
- gamedata
```js
{
  "totalBet" : [number], // 총 베팅 금액
  "isRegistered": [boolean], // 선수 등록 가능 여부, trigger : 선수등록여부
  "canBuy": [boolean], // 티켓 구매 가능 여부, trigger : 판매시작/종료
  "toDev": 0.03, // 개발자 3프로
  "toCeo": 0.07, // 총책임 7프로
  "toPlayer": 0.05 // 선수에게 5프로
}
```
- player
```js
{
  "players": [
    {
      "playerUserId": [string], // 선수 userId
      "betAmount": [number], // 선수에 베팅된 금액
      "rate": [number] // 배당률
    },
  ]
}
```
- tickets
```js
{
  "tickets":[
    {
      "buyer" : [string:userId], // 구매자 userId
      "betAmount": [number], // 베팅 금액
      "choosedPlayerUserId": [string:userId], // 선택
    }
  ]
}
```